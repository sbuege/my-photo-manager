<!DOCTYPE html>
<html lang="de" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8"/>
	<title>My Photo Manager</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet"
		  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body class="h-screen flex flex-col">

<!-- HEADER -->
<header th:insert="~{fragments/header :: header}"></header>

<!-- MAIN -->
<div th:if="${mainTemplate == null}">mainTemplate fehlt</div>
<main th:insert="${mainTemplate} :: ${mainFragment}"></main>

<!-- FOOTER -->
<footer th:insert="fragments/footer :: footer"></footer>

</body>

<script>

	const checkboxes = document.querySelectorAll(".filter-checkbox");
	const activeFiltersContainer = document.getElementById("activeFilters");

	function renderActiveFilters() {
		activeFiltersContainer.innerHTML = "";

		checkboxes.forEach(cb => {
			if (cb.checked) {
				const tag = document.createElement("div");
				tag.className =
					"flex items-center bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm";

				tag.innerHTML = `
				  ${cb.dataset.filter}: ${cb.dataset.label}
				  <button class="ml-2 text-blue-500 hover:text-blue-700 remove-filter"
						  data-value="${cb.value}"
						  data-filter="${cb.dataset.filter}">
					âœ•
				  </button>
				`;
				activeFiltersContainer.appendChild(tag);
			}
		});

		attachRemoveEvents();
	}

	function attachRemoveEvents() {
		const removeButtons = document.querySelectorAll(".remove-filter");

		removeButtons.forEach(btn => {
			btn.addEventListener("click", () => {
				checkboxes.forEach(cb => {
					if (cb.value === btn.dataset.value && cb.dataset.filter === btn.dataset.filter) {
						cb.checked = false;
					}
				});
				renderActiveFilters();
			});
		});
	}

	checkboxes.forEach(cb => {
		cb.addEventListener("change", renderActiveFilters);
	});

	renderActiveFilters();
</script>

</html>